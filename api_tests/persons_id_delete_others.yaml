# Test generated by RoostGPT for test credential-wallet-rest-assured using AI Type Azure Open AI and AI Model roost-gpt4-32k


# Test generated for /recipients/persons/{id}_delete for http method type DELETE in artillery framework

# RoostTestHash=819791060f


config:
  target: "{{ $processEnvironment.API_HOST }}"
  ensure:
    p95: 200
  plugins:
    expect: {}

  payloads:
    - path: "./payloads/persons_id_delete_others.csv"
      fields:
        - "id"
      skipHeader: true

  processor: "../processors/my-processor.js"
  
scenarios:
  - name: "Testing fail cases for recipients persons API endpoints"
    flow:

    # Scenario: Attempt to Delete a recipient person with an unauthorized API token
    - post:
        url: "/recipients/persons/{{ id }}"
        headers:
          content-type: "application/json"
          Token: "{{ $processEnvironment.AUTH_TOKEN }}"
        expect:
          - statusCode: 401
          - hasHeader: "Content-Type"
          - equals: ["body.message", "Unauthorized"]
        beforeRequest: "setAuthHeader"
        afterResponse: "logResponseTime"
      think: 1

    # Scenario: Attempt to get a recipient person with an invalid id
    - get:
        url: "/recipients/persons/invalid_id"
        headers:
          content-type: "application/json"
          Token: "{{ $processEnvironment.AUTH_TOKEN }}"
        expect:
          - statusCode: 404
          - hasHeader: "Content-Type"
          - equals: ["body.message", "Not Found"]
        beforeRequest: "setAuthHeader"
        afterResponse: "logResponseTime"
      think: 1

    # Scenario: Attempt to update a recipient person with an empty payload
    - put:
        url: "/recipients/persons/{{ id }}"
        headers:
          content-type: "application/json"
          Token: "{{ $processEnvironment.AUTH_TOKEN }}"
        json:
          {}
        expect:
          - statusCode: 400
          - hasHeader: "Content-Type"
          - equals: ["body.message", "Bad Request"]
        beforeRequest: "setAuthHeader"
        afterResponse: "logResponseTime"
      think: 1

    # Scenario: Attempt to delete a recipient person with non existing id
    - delete:
        url: "/recipients/persons/{{ id }}"
        headers:
          content-type: "application/json"
          Token: "{{ $processEnvironment.AUTH_TOKEN }}"
        expect:
          - statusCode: 404
          - hasHeader: "Content-Type"
          - equals: ["body.message", "Not Found"]
        beforeRequest: "setAuthHeader"
        afterResponse: "logResponseTime"
      think: 1
