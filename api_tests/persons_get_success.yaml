# Test generated by RoostGPT for test credential-wallet-rest-assured using AI Type Azure Open AI and AI Model roost-gpt4-32k


# Test generated for /recipients/persons_get for http method type GET in artillery framework

# RoostTestHash=aa0a5d4980


config:
  target: "{{ $processEnvironment.API_HOST }}"
  processor: "./my-functions.js"
  payload:
    path: "./payloads/persons_get_success.csv"
    fields: ["size", "offset", "name", "birth-date"]
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "API Test Scenario"
    flow:
      - get: 
        url: "/recipients/persons?size={{ size }}&offset={{ offset }}&name={{ name }}&birth-date={{ birth-date }}"
        headers:
          Token: "{{$processEnvironment.AUTH_TOKEN}}"
        capture:
          json: "$.persons[*].id"
          as: "recipients"
        expect:
          - statusCode: 200
          - contentType: "application/json"
          - hasProperty: "api-version"
          - hasProperty: "page-size"
          - hasProperty: "page-offset"
        think: 1
      - log: "Retrieved recipient data for: {{ name }}"
      - post:
        url: "/recipients/persons"
        headers:
          Token: "{{$processEnvironment.AUTH_TOKEN}}"
        json:
          name: "{{ name }}"
          birth-date: "{{ birth-date }}"
        expect:
          - statusCode: 200
          - hasProperty: "persons"
          - hasHeader: "Content-Type"
        think: 1
      - log: "Added new recipient: {{ name }}"
      - delete: 
        url: "/recipients/persons/{{ name }}"
        headers:
          Token: "{{$processEnvironment.AUTH_TOKEN}}"
        expect:
          - statusCode: 200
        think: 1
      - log: "Deleted recipient: {{ name }}"
