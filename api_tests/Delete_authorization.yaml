# Test generated by RoostGPT for test credential-integration-artillery using AI Type Open AI and AI Model gpt-4-1106-preview


config:
  target: "http://localhost:8080"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "Delete_authorization.csv"
    skipHeader: true
    fields:
      - "id"
  plugins:
    expect: {}

scenarios:
  - name: "scenario Delete an existing authorization and verify its deletion"
    flow:
      - post:
          url: "/authorizations"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          json:
            authorizationId: "{{ id }}"
          expect:
            - statusCode: 201
          log: "Creating an authorization to be deleted."
          think: 1
      - delete:
          url: "/authorizations/{{ id }}"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
          log: "Deleting the authorization with the provided ID."
          think: 1
      - get:
          url: "/authorizations"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
            - hasProperty: "authorizations"
            - "!contains": "{{ id }}"
          log: "Verifying the authorization has been deleted successfully."
