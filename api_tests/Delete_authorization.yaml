# Test generated by RoostGPT for test credential-integration-artillery using AI Type Open AI and AI Model gpt-4-1106-preview


config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "Delete_authorization.csv"
    skipHeader: true
    fields:
      - "authorizationId"
  environments:
    development:
      API_HOST: "http://localhost:3000"
    production:
      API_HOST: "https://api.production.com"
  plugins:
    expect: {}

scenarios:
  - name: "Delete authorization"
    flow:
      - post:
          url: "/authorizations"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          json:
            name: "John Doe"
            role: "user"
          log: "Creating an authorization to delete later."
          expect:
            - statusCode: 200
          think: 1

      - delete:
          url: "/authorizations/{{ authorizationId }}"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          log: "Deleting the authorization."
          expect:
            - statusCode: 200
          think: 1

      - get:
          url: "/authorizations"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          log: "Verifying the authorization has been deleted."
          expect:
            - statusCode: 200
            - hasProperty: "authorizations"
            - "!hasProperty": "{{ authorizationId }}"
          think: 1
