# ********RoostGPT********
# Test generated by RoostGPT for test credential-wallet-rest-assured using AI Type Azure Open AI and AI Model roost-gpt4-32k

# Test generated for /accounts_post for http method type POST in artillery framework
# RoostTestHash=53e96f9805



# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
  - duration: 60
    arrivalRate: 20
  payload:
    path: "accounts_post_others.csv"
    fields:
      - "email"
    skipHeader: true
  processor: "./my-functions.js"
  plugins:
    expect: {}

scenarios:
  - name: "Testing non-success responses for API endpoints"
    flow:
    - log: "Sending POST request with incorrect URL"
      post:
        url: "/accouns"
        headers:
          Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        json:
          email: "{{ email }}"
        expect:
        - statusCode: 404
    - think: 1

    - log: "Sending POST request without required payload"
      post:
        url: "/accounts"
        headers:
          Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        expect:
        - statusCode: 400
    - think: 1

    - log: "Sending POST request with malformed email"
      post:
        url: "/accounts"
        headers:
          Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        json:
          email: "malformedEmail"
        expect:
        - statusCode: 400
    - think: 1

    - log: "Sending POST request without authorization header"
      post:
        url: "/accounts"
        json:
          email: "{{ email }}"
        expect:
        - statusCode: 401
        - hasHeader: "WWW-Authenticate"
    - think: 1
