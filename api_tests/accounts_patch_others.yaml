# Test generated by RoostGPT for test credential-wallet-rest-assured using AI Type Azure Open AI and AI Model roost-gpt4-32k


# Test generated for /accounts_patch for http method type PATCH in artillery framework

# RoostTestHash=2758affb7e


config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  http: 
    timeout: 10
  payload:
    path: "./accounts_patch_others.csv"
    fields:
      - "email"
    skipHeader: true
  variables:
    noSuchEmail: "invalid.email@invalid.com"

scenarios:
  - name: "API response tests for various error cases"
    flow:
      # Test: Unauthenticated access to the accounts endpoint
      # Expect: API rejects unauthenticated access and returns 401 error
      - get: 
          url: "/accounts"
        post:
          headers:
            token: "{{$processEnvironment.AUTH_TOKEN}}"
          expect:
            - statusCode: 401
        think: 1
        
      # Test: Invalid method (PATCH) for the accounts endpoint
      # Expect: API rejects invalid method and returns 405 error
      - patch: 
          url: "/accounts"
        post:
          headers:
            token: "{{$processEnvironment.AUTH_TOKEN}}"
          expect:
            - statusCode: 405 
        think: 1

      # Test: Sending a POST request with a malformed email in the request body
      # Expect: API rejects invalid POST request and returns 400 error
      - post: 
          url: "/accounts"
          headers:
            Content-Type: "application/json"
            token: "{{$processEnvironment.AUTH_TOKEN}}"
          json:
            email: "{{ noSuchEmail }}"
          expect:
            - statusCode: 400
        think: 1
