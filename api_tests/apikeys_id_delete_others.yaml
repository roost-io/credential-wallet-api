# Test generated by RoostGPT for test credential-wallet-rest-assured using AI Type Azure Open AI and AI Model roost-gpt4-32k


# Test generated for /apikeys/{id}_delete for http method type DELETE in artillery framework

# RoostTestHash=4affc26394


config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 20
  plugins:
    expect: {}
  payload:
    path: "apikeys_id_delete_others.csv"
    skipHeader: true
    fields: 
      - "id"
      - "apiKey"

scenarios:
  - name: "API endpoint failure cases test"
    flow:
      - post: # Invalid headers- Unauthenticated API call
          url: "/apikeys/{{ id }}"

          # No header for API key provided
          headers: {}
          expect:
            - statusCode: 401 # Unauthenticated requests should return 401

          # Think time before executing next request 
          think: 1 

      - get: # Invalid URL- mistyped URL
          url: "/apikey/{{ id }}"

          # Header for API key provided
          headers:
            {{ $processEnvironment.AUTH_TOKEN }}: "{{ apiKey }}"
          expect:
            - statusCode: 404 # Incorrect URLs should return 404

          # Think time before executing next request 
          think: 1

      - delete: # Invalid payload- UUID of the wrong format
          url: "/apikeys/{{ id }}"

          # Header for API key provided
          headers: 
            {{ $processEnvironment.AUTH_TOKEN }}: "{{ apiKey }}"

          # Payload with correct keys, but values of the wrong format
          json:
            id: "not-a-uuid"
          expect:
            - statusCode: 400 # Badly formatted payloads should return 400
            - hasProperty: "message" # Error message should be included in the response
            - equals:
                - message
                - "Invalid UUID" # Error message should indicate invalid UUID

          # Think time before executing next request 
          think: 1
