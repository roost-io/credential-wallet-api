# Test generated by RoostGPT for test credential-wallet-rest-assured using AI Type Azure Open AI and AI Model roost-gpt4-32k


# Test generated for /recipients/branches/{id}_patch for http method type PATCH in artillery framework

# RoostTestHash=9caaa2ef96


config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 5
  plugins:
    expect: {}
  payload:
    path: "branches_id_patch_others.csv"
    fields: ["id", "tradeName", "phone", "email"]
    skipHeader: true
  variables:
    AUTH_TOKEN: "${$processEnvironment.AUTH_TOKEN}"

scenarios:
  - name: "Failure cases for /recipients/branches/{id} PATCH request"
    flow:
      # Failing PATCH request with missing payload
      - patch:
          url: "/recipients/branches/{{ id }}"
          headers:
            Token: "{{ AUTH_TOKEN }}"
          beforeRequest: 'log'
          expect:
            - statusCode: 400
          think: 5

      # Incorrect PATCH request with invalid URL
      - patch:
          url: "/recipients/branches/invalid_URL"
          json:
            tradeName: "{{ tradeName }}"
            phone: "{{ phone }}"
            email: "{{ email }}"
          headers:
            Token: "{{ AUTH_TOKEN }}"
          expect:
            - statusCode: 404
          think: 5

      # PATCH request with missing authorization token
      - patch:
          url: "/recipients/branches/{{ id }}"
          json:
            tradeName: "{{ tradeName }}"
            phone: "{{ phone }}"
            email: "{{ email }}"
          headers:
            Token: ""
          expect:
            - statusCode: 401
          think: 5

      # PATCH request with incorrect authorization token
      - patch:
          url: "/recipients/branches/{{ id }}"
          json:
            tradeName: "{{ tradeName }}"
            phone: "{{ phone }}"
            email: "{{ email }}"
          headers:
            Token: "incorrect_token"
          expect:
            - statusCode: 403
          think: 5

      # Failing PATCH request with incorrect payload details
      - patch:
          url: "/recipients/branches/{{ id }}"
          json:
            tradeName: 1234 # should be string
            phone: "{{ phone }}"
            email: "{{ email }}"
          headers:
            Token: "{{ AUTH_TOKEN }}"
          expect:
            - statusCode: 422
            - hasProperty: "errors.tradeName"
          think: 5
